# oh my zsh display ssh user name and server hostname
export PROMPT="$fg[cyan]%}$USER@%{$fg[blue]%}%m ${PROMPT}"

ip=`ifconfig | grep -o -m 2 -E "\d+\.\d+\.\d+\.\d+" | sed -n 2p`

alias yt='docker run -e "http_proxy=http://$ip:1087" -e "https_proxy=http://$ip:1087" --rm -v $PWD:/data vimagick/youtube-dl'
alias youget='docker run --rm -v $PWD:/downloads ondrejmo/you-get'
alias lessc='docker run -it --rm -v $(pwd):$(pwd) -w $(pwd) ewoutp/lessc '
alias sassc='docker run --rm -v $(pwd):/data codycraven/sassc '
alias cling='docker run --rm -v `pwd`:/code -it maddouri/cling-ubuntu-docker_auto'
alias yarn='docker run -it --rm -v `pwd`:/data digitallyseamless/nodejs-bower-grunt yarn'
alias bower='docker run -it --rm -v `pwd`:/data digitallyseamless/nodejs-bower-grunt bower'
alias grunt='docker run -it --rm -v `pwd`:/data digitallyseamless/nodejs-bower-grunt grunt'
#alias npm='docker run --name=npm -it --rm -v ~/npm/node_modules:/usr/local/lib/node_modules -v $PWD:/data digitallyseamless/nodejs-bower-grunt npm --registry=https://registry.npm.taobao.org '
alias composer='docker run --rm --interactive --tty --volume $PWD:/app --volume ~/composer:/tmp composer'
alias gulp='docker run --rm -it -v `pwd`:/workspace monostream/nodejs-gulp-bower gulp'
alias cheat='docker run  --rm suxiaolin1993/cheat'
alias dr2='docker run --rm -it -v $PWD:/home/r2 -v ~/.config/radare2/.radare2rc:/home/r2/.radare2rc radare/radare2 r2'
alias httpserver='docker run -d -p 82:8080 --name=httpserver --rm -v $PWD:/data visualjeff/simple-http-server:0.0.1'
alias sass='docker run -it --rm -v $(pwd):$(pwd) -w $(pwd) jbergknoff/sass'
alias webpack='docker run --rm -i -t -v $PWD:/app jmfirth/webpack webpack'
alias phpunit='docker run -v $(pwd):/app --rm phpunit/phpunit'
alias phpunit5='docker run -v $(pwd):/app --rm phpunit/phpunit:5.7.12'
alias phpunit4='docker run -v $(pwd):/app --rm phpunit/phpunit:4.8.5'
alias deepo='docker run --rm -it -v ~/deepo/data:/data -v ~/deepo/config:/config ufoym/deepo:all-py27-cpu bash'
alias youget='docker run -e "http_proxy=http://$ip:1087" -e "https_proxy=http://$ip:1087" --rm kmdgeek/you-get'

# for anybar
function anybar { echo -n $1 | nc -4u -w0 localhost ${2:-1738}; }

proxy() {
    export http_proxy=http://127.0.0.1:1087;
    export https_proxy=http://127.0.0.1:1087;
    echo "已开启代理"
}

# go development enviroment
goup() {
	GOPATH=~/gopath
	docker run -it --rm \
	--volume $GOPATH/src:/go/src \
	--workdir /go/src \
	deis/go-dev:latest \
	bash
}

# laradocker start down restart
dup() {
    #cd ~/Sites/laradock && docker-compose up -d nginx mysql mysql-slave redis mongo php-worker
    cd ~/Sites/laradock && docker-compose up -d nginx mysql redis php-worker
    cd -
}

ddown() {
    cd ~/Sites/laradock && docker-compose down
    cd -
}

drestart() {
    ddown;
    dup;
}

mmaster() {
    mysqlsh --sql -h127.0.0.1 -uroot -proot
}
mslave() {
    mysqlsh --sql -h127.0.0.1 -P3307 -uroot -proot
}
dredis() {
    docker exec -it laradock_redis_1 redis-cli
}
# laradocker start down restart end

# percona tools start
percona-tools() {
    docker run --rm -it brunoric/percona-toolkit $@;
}
# percona tools end

# openresty
oup() {
    docker run --rm --name openresty -d -p 8877:80 -v ~/Documents/Docker/openresty/conf.d:/etc/nginx/conf.d -v ~/Documents/Docker/openresty/html:/usr/local/openresty/nginx/html -v ~/Documents/Docker/openresty/log:/var/log/nginx/  openresty/openresty:alpine
}

odown() {
    docker stop openresty
}

orestart() {
    odown;
    oup;
}

osh() {
    docker exec -it -w /etc/nginx openresty sh
}
# openresty end

noproxy() {
    unset http_proxy
    unset https_proxy
    echo "已关闭代理"
}

export PATH=~/Applications/vim8/bin:~/Applications/nasm:~/Applications/r2/bin:/data/php/bin:$(brew --prefix homebrew/php/php71)/bin:$PATH
export PATH=$PATH:~/
export R2PM_DBDIR=/Users/suxiaolin/Applications/r2pm

clear
